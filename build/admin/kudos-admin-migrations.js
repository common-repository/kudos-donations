(()=>{"use strict";var t={1455:t=>{t.exports=window.wp.apiFetch},7723:t=>{t.exports=window.wp.i18n}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o=n(1455),s=n.n(o),a=n(7723);document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("kudos-migrate-button"),e=document.getElementById("kudos-migration-status");function n(t,o){s()({path:"/kudos/v1/migration/migrate/",method:"POST",data:{offset:t,batch_size:o}}).then((t=>{t.completed?e.textContent="Migrations completed successfully!":(e.textContent=(0,a.sprintf)(/* translators: %s is number of migrations processed */ /* translators: %s is number of migrations processed */
(0,a.__)("Processed %s migrationsâ€¦"),t.next_offset),n(t.next_offset,o))})).catch((t=>{e.textContent=t?.message?t.message:"Migration failed. Please check the logs."})).finally((()=>{s()({path:"/wp/v2/settings",method:"POST",data:{_kudos_migration_busy:!1,_kudos_migration_status:[]}})}))}t&&t.addEventListener("click",(o=>{o.preventDefault(),t.style.display="none",t.disabled=!0,e.textContent=(0,a.__)("Running migrations in the background. This might take a minute.","kudos-donations"),n(0,1)}))}))})();